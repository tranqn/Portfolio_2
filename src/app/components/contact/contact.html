<section id="contact" class="contact">
  <div class="contact__container">
    <div class="contact__sticker">
      <img [src]="stickerPath" alt="" class="contact__sticker-bg">
      <img [src]="logoPath" alt="" class="contact__sticker-logo">
      <svg class="contact__sticker-text" viewBox="0 0 200 200">
        <defs>
          <path id="stickerTextPath"
            d="M 100,100 m -68,0 a 68,68 0 1,1 136,0 a 68,68 0 1,1 -136,0" />
        </defs>
        <text>
          <textPath href="#stickerTextPath">
            Quoc Nam Tran &#8226; Frontend Developer &#8226;
          </textPath>
        </text>
      </svg>
    </div>

    <!-- Left: Content -->
    <div class="contact__left">
      <div class="contact__content">
        <span class="contact__label">{{ 'CONTACT.LABEL' | translate }}</span>
        <h2 class="contact__title">{{ 'CONTACT.TITLE' | translate }}</h2>
        <p class="contact__description">{{ 'CONTACT.DESCRIPTION' | translate }}</p>
        <!-- Arrow: desktop only -->
        <img [src]="underlinePath" alt="" class="contact__underline contact__underline--desktop">
      </div>
    </div>

    <!-- Right: Contact Form -->
    <div class="contact__right">
      <form class="contact__form" (ngSubmit)="onSubmit(contactForm)" #contactForm="ngForm">
        <label for="name">{{ 'CONTACT.NAME_LABEL' | translate }}</label>
        <input
          [(ngModel)]="formData.name"
          #nameInput="ngModel"
          type="text"
          id="name"
          name="name"
          [placeholder]="'CONTACT.NAME_PLACEHOLDER' | translate"
          required
          autocomplete="name">
        <div class="contact__form-error">
          @if (nameInput.touched && nameInput.errors?.['required']) {
            <span>{{ 'CONTACT.ERROR_REQUIRED' | translate }}</span>
          }
        </div>

        <label for="email">{{ 'CONTACT.EMAIL_LABEL' | translate }}</label>
        <input
          [(ngModel)]="formData.email"
          #emailInput="ngModel"
          type="email"
          id="email"
          name="email"
          [placeholder]="'CONTACT.EMAIL_PLACEHOLDER' | translate"
          pattern="[a-zA-Z0-9._%+\-]+@[a-zA-Z0-9.\-]+\.[a-zA-Z]{2,}"
          required
          autocomplete="email">
        <div class="contact__form-error">
          @if (emailInput.touched && emailInput.errors?.['required']) {
            <span>{{ 'CONTACT.ERROR_REQUIRED' | translate }}</span>
          } @else if (emailInput.touched && emailInput.errors?.['pattern']) {
            <span>{{ 'CONTACT.ERROR_EMAIL' | translate }}</span>
          }
        </div>

        <label for="message">{{ 'CONTACT.MESSAGE_LABEL' | translate }}</label>
        <textarea
          [(ngModel)]="formData.message"
          #messageInput="ngModel"
          id="message"
          name="message"
          [placeholder]="'CONTACT.MESSAGE_PLACEHOLDER' | translate"
          minlength="4"
          required></textarea>
        <div class="contact__form-error">
          @if (messageInput.touched && messageInput.errors?.['required']) {
            <span>{{ 'CONTACT.ERROR_REQUIRED' | translate }}</span>
          } @else if (messageInput.touched && messageInput.errors?.['minlength']) {
            <span>{{ 'CONTACT.ERROR_MINLENGTH' | translate }}</span>
          }
        </div>

        <!-- Privacy checkbox with custom styling -->
        <div class="contact__form-checkbox">
          <input
            [(ngModel)]="privacyAccepted"
            type="checkbox"
            id="privacy"
            name="privacy"
            required>
          <label for="privacy">
            <span>
              {{ 'CONTACT.PRIVACY_TEXT' | translate }}
              <a routerLink="/privacy-policy">{{ 'CONTACT.PRIVACY_LINK' | translate }}</a>
              {{ 'CONTACT.PRIVACY_TEXT_2' | translate }}
            </span>
          </label>
        </div>

        <!-- Form actions: arrow (mobile) + CTA -->
        <div class="contact__form-actions">
          <img [src]="underlinePath" alt="" class="contact__underline contact__underline--mobile">
          <app-cta-button
            type="submit"
            [translateKey]="'CONTACT.SUBMIT'"
            [disabled]="!contactForm.valid || isSubmitting()" />
        </div>
      </form>
    </div>
  </div>
</section>
